Terminologies
=======================================

IMAP is a standard email protocol that allows users to access and manage their email on a mail server. Here are some key terminologies related to IMAP:

Key Terminologies
-----------------

1. **IMAP Server**:
   - The server that hosts the user's email and allows access via the IMAP protocol. It stores the emails and provides various services like fetching, reading, and organizing messages.

2. **Client**:
   - The software or application used to access email from the IMAP server. Examples include email clients like Microsoft Outlook, Mozilla Thunderbird, and mobile email apps.

3. **Mailbox**:
   - A folder or storage area on the IMAP server where email messages are kept. Common mailboxes include the Inbox, Sent, Drafts, and Trash.

4. **Message**:
   - An individual email that contains headers (like the sender, recipient, subject) and a body (the content of the email, which can be text or HTML, and attachments).

5. **Flags**:
   - Indicators that can be set on messages to mark their status. Common flags include \Seen (message has been read), \Answered (message has been replied to), \Flagged (message is marked for follow-up), \Deleted (message is marked for deletion), and \Draft (message is a draft).

6. **Capability**:
   - A feature or command supported by the IMAP server. Clients can query the server for its capabilities to understand what commands and features it supports.

7. **Synchronization**:
   - The process of ensuring that the email client and the server are in agreement regarding the status and content of messages. IMAP allows for real-time synchronization of email across multiple devices.

8. **Expunge**:
   - The command used to permanently remove messages marked for deletion from the server. Messages are usually flagged for deletion first and then expunged to free up space.

9. **Fetch**:
   - A command used to retrieve specific parts or attributes of an email message, such as headers, body, or flags.

10. **Search**:
    - A command that allows clients to search for messages based on specific criteria like sender, recipient, subject, date, and flags.

Message-ID Header
-----------------

**Definition:**
The Message-ID header is a unique identifier assigned to every email message. This identifier is used to distinguish each email uniquely across different mail systems and servers.

**Format:**
The format of a Message-ID is standardized by the Internet Engineering Task Force (IETF) in RFC 5322. It typically looks like this:
```
<unique-string@domain>
```
- `unique-string`: A unique combination of characters generated by the sending email server, which can include alphanumeric characters and sometimes special characters.
- `domain`: The domain name of the sending server.

**Purpose:**
- **Uniqueness:** Ensures that each email has a distinct identity, preventing confusion with other messages.
- **Threading:** Email clients use the Message-ID to group related messages together (e.g., replies and forwards) to create conversation threads.
- **Tracking:** Useful for tracking the message through different servers and clients, aiding in troubleshooting and spam detection.

UID (Unique Identifier)
-----------------------

**Definition:**
A UID is a permanent, unique identifier assigned to each message in an IMAP mailbox. Unlike sequence numbers, UIDs do not change and remain constant even if the order of messages changes.

**Purpose:**
- **Stability:** Provides a stable way to reference a specific message, even across different sessions and connections.
- **Synchronization:** Used by email clients to synchronize messages accurately with the server. Since UIDs are unique and unchanging, clients can track which messages have been processed.
- **Efficiency:** Allows clients to efficiently manage and retrieve specific messages without ambiguity.

**Usage:**
- When a client requests a message by its UID, the server can quickly locate and provide the exact message, ensuring that the client receives the correct data.

Sequence Number
---------------

**Definition:**
A sequence number is a temporary identifier assigned to a message based on its position in the mailbox. Sequence numbers start at 1 and increment by 1 for each message.

**Characteristics:**

- **Transience:** Sequence numbers are dynamic and can change if messages are added, deleted, or moved within the mailbox.

- **Position-Based:** Reflects the message's current position in the mailbox, not its unique identity.

**Purpose:**

- **Ordering:** Helps in identifying the relative order of messages in a mailbox, which is useful for displaying messages in chronological order.

- **Range Operations:** Allows clients to perform operations on a range of messages based on their sequence numbers (e.g., fetching, deleting).

**Differences Between UID and Sequence Number:**

- **Permanence:** UIDs are permanent and do not change, while sequence numbers can change as the mailbox is modified.

- **Uniqueness:** UIDs are globally unique within the mailbox, ensuring consistent identification. Sequence numbers are unique only temporarily and are relative to the current mailbox state.

Practical Example
-----------------

Imagine an IMAP mailbox with the following messages:

1. `UID=101, Sequence Number=1, Message-ID=<abc123@domain.com>`
2. `UID=102, Sequence Number=2, Message-ID=<def456@domain.com>`
3. `UID=103, Sequence Number=3, Message-ID=<ghi789@domain.com>`

If the second message (UID=102) is deleted:

The sequence numbers for remaining messages will change:

- `UID=101` becomes `Sequence Number=1`
- `UID=103` becomes `Sequence Number=2`

The UIDs remain the same:

- `UID=101` is still `UID=101`
- `UID=103` is still `UID=103`
